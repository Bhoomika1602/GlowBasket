# Deploying Django Ecommerce Site on Render

This guide will help you deploy your Django ecommerce project on Render.

## Prerequisites

1. A GitHub account
2. A Render account (free tier available)
3. Your Django project pushed to a GitHub repository

## Step 1: Prepare Your Repository

Make sure your project is pushed to GitHub with the following files:

- `render.yaml` - Render configuration
- `requirements.txt` - Python dependencies
- `build.sh` - Build script
- `ecommerce_site/production_settings.py` - Production settings

## Step 2: Deploy on Render

### Option A: Using render.yaml (Recommended)

1. Go to [Render Dashboard](https://dashboard.render.com/)
2. Click "New +" and select "Blueprint"
3. Connect your GitHub repository
4. Render will automatically detect the `render.yaml` file
5. Click "Apply" to deploy

### Option B: Manual Deployment

1. Go to [Render Dashboard](https://dashboard.render.com/)
2. Click "New +" and select "Web Service"
3. Connect your GitHub repository
4. Configure the service:
   - **Name**: `ecommerce-site`
   - **Environment**: `Python 3`
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `gunicorn ecommerce_site.wsgi:application`
   - **Plan**: Free

5. Add Environment Variables:
   - `RENDER`: `true`
   - `SECRET_KEY`: (auto-generated)
   - `DEBUG`: `false`
   - `ALLOWED_HOSTS`: `.onrender.com`

6. Click "Create Web Service"

## Step 3: Set Up Database

1. In your Render dashboard, click "New +" and select "PostgreSQL"
2. Configure the database:
   - **Name**: `ecommerce-db`
   - **Database**: `ecommerce_db`
   - **User**: `ecommerce_user`
   - **Plan**: Free

3. Copy the database URL and add it as an environment variable in your web service:
   - `DATABASE_URL`: (paste the connection string)

## Step 4: Configure Environment Variables

In your web service settings, add these environment variables:

```
RENDER=true
SECRET_KEY=(auto-generated by Render)
DEBUG=false
ALLOWED_HOSTS=.onrender.com
DATABASE_URL=(from your PostgreSQL service)
DJANGO_SETTINGS_MODULE=ecommerce_site.settings
WEB_CONCURRENCY=4
```

## Step 5: Deploy and Test

1. Render will automatically build and deploy your application
2. Once deployed, you'll get a URL like: `https://your-app-name.onrender.com`
3. Visit the URL to test your application

## Step 6: Create Superuser (Optional)

To access the Django admin panel:

1. Go to your Render dashboard
2. Select your web service
3. Go to "Shell" tab
4. Run: `python manage.py createsuperuser`

## Troubleshooting

### Common Issues:

1. **Build Failures**: Check the build logs in Render dashboard
2. **Database Connection**: Ensure `DATABASE_URL` is correctly set
3. **Static Files**: Make sure `STATIC_ROOT` is properly configured
4. **Environment Variables**: Verify all required variables are set

### Logs

- View build logs in the "Logs" tab of your Render service
- Check for any error messages during deployment

## File Structure

Your project should have this structure:

```
ecommerce_site/
├── render.yaml
├── requirements.txt
├── build.sh
├── manage.py
├── ecommerce_site/
│   ├── __init__.py
│   ├── settings.py
│   ├── production_settings.py
│   ├── urls.py
│   └── wsgi.py
├── shop/
│   └── (your app files)
└── static/
    └── (your static files)
```

## Security Notes

- Never commit sensitive information like SECRET_KEY to your repository
- Use environment variables for all sensitive configuration
- Enable HTTPS in production (handled automatically by Render)
- Keep DEBUG=False in production

## Cost

- Render's free tier includes:
  - 750 hours/month of web service runtime
  - 1GB PostgreSQL database
  - Automatic HTTPS
  - Custom domains

## Support

If you encounter issues:
1. Check Render's documentation: https://render.com/docs
2. Review Django deployment checklist: https://docs.djangoproject.com/en/stable/howto/deployment/checklist/
3. Check the logs in your Render dashboard 